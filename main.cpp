#include "task1.h"
#include "task2.h"
#include "task3.h"
#include <iostream>

using namespace std;

void printMainMenu() {
    cout << "\n╔════════════════════════════════════════════════════════════╗" << endl;
    cout << "║         ЛАБОРАТОРНАЯ РАБОТА №4: МНОГОПОТОЧНОСТЬ            ║" << endl;
    cout << "╠════════════════════════════════════════════════════════════╣" << endl;
    cout << "║ 1. Задание 1: Примитивы синхронизации                     ║" << endl;
    cout << "║ 2. Задание 2: Фильтрация автомобилей (вариант 17)        ║" << endl;
    cout << "║ 3. Задание 3: Алгоритм банкира (вариант 1)               ║" << endl;
    cout << "║ 4. Выполнить все задания                                  ║" << endl;
    cout << "║ 0. Выход                                                  ║" << endl;
    cout << "╚════════════════════════════════════════════════════════════╝" << endl;
    cout << "Выберите задание: ";
}

int main() {
    // Настройка локали для корректного отображения русского текста
    setlocale(LC_ALL, "Russian");
    
    cout << "╔════════════════════════════════════════════════════════════╗" << endl;
    cout << "║                  ДОБРО ПОЖАЛОВАТЬ!                         ║" << endl;
    cout << "║         Лабораторная работа №4: Многопоточность            ║" << endl;
    cout << "║                                                            ║" << endl;
    cout << "║  Выполнила: [Петроченко Маргарита Романовна]                                     ║" << endl;
    cout << "║  Группа:   [АБс-426]                                  ║" << endl;
    cout << "║  Вариант:  17 (задание 2), 1 (задание 3)                  ║" << endl;
    cout << "╚════════════════════════════════════════════════════════════╝" << endl;
    
    while (true) {
        printMainMenu();
        
        int choice;
        cin >> choice;
        
        if (choice == 0) {
            cout << "\n╔════════════════════════════════════════════════════════════╗" << endl;
            cout << "║                 Спасибо за использование!                  ║" << endl;
            cout << "╚════════════════════════════════════════════════════════════╝" << endl;
            break;
        }
        
        switch (choice) {
            case 1:
                task1();
                break;
            case 2:
                task2();
                break;
            case 3:
                task3();
                break;
            case 4:
                task1();
                task2();
                task3();
                break;
            default:
                cout << "\n⚠ Неверный выбор! Попробуйте снова." << endl;
        }
        
        cout << "\nНажмите Enter для продолжения...";
        cin.ignore();
        cin.get();
    }
    
    return 0;
}
